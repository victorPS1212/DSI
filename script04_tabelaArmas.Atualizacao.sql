BEGIN TRANSACTION;
GO

ALTER TABLE [Personagens] DROP CONSTRAINT [FK_Personagens_Usuarios_usuarioId];
GO

EXEC sp_rename N'[Personagens].[usuarioId]', N'UsuarioId', N'COLUMN';
GO

EXEC sp_rename N'[Personagens].[IX_Personagens_usuarioId]', N'IX_Personagens_UsuarioId', N'INDEX';
GO

ALTER TABLE [Armas] ADD [PersonagemId] int NOT NULL DEFAULT 0;
GO

UPDATE [Armas] SET [PersonagemId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 4
WHERE [Id] = 4;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 5
WHERE [Id] = 5;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 6
WHERE [Id] = 6;
SELECT @@ROWCOUNT;

GO

UPDATE [Armas] SET [PersonagemId] = 7
WHERE [Id] = 7;
SELECT @@ROWCOUNT;

GO

UPDATE [Usuarios] SET [PasswordHash] = 0x2360D725C5D551E883C87D6AD7D015F9ACAF81775AC86F877EAF52B0BE87894F8F8D4B10A1F03473A91F39385624D63FE473B189E6899B7BC2E6C3C973256CA4, [PasswordSalt] = 0x7931278B0A88155F5D1B66EE2B6F786F7BBDE4DCE7D79D27A3185FDF520C485F995D8FA80BF0F4DC4953B8E384F53712DB4F24E27F6359AA4A4AAEF48F97CDC714D78473D8D9130648EB322EEFBF2345D1717FECD0022B01F548896290668C7974357A8AA4AEC1E45FCBF8021AB7773AAC43CEF245164535D182B58618DF4AB1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

CREATE UNIQUE INDEX [IX_Armas_PersonagemId] ON [Armas] ([PersonagemId]);
GO

ALTER TABLE [Armas] ADD CONSTRAINT [FK_Armas_Personagens_PersonagemId] FOREIGN KEY ([PersonagemId]) REFERENCES [Personagens] ([Id]) ON DELETE CASCADE;
GO

ALTER TABLE [Personagens] ADD CONSTRAINT [FK_Personagens_Usuarios_UsuarioId] FOREIGN KEY ([UsuarioId]) REFERENCES [Usuarios] ([Id]);
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230419010232_MigracaoUmParaUm', N'7.0.5');
GO

COMMIT;
GO

